# template-run-all-tests.yaml
# Run all  tests across the LibsAndSamples.sln project

parameters:
  BuildConfiguration: 'Release'

steps:

- template: template-install-keyvault-secrets.yaml

# Run Unit Tests
- template: template-run-unit-tests.yaml
  parameters:
    BuildConfiguration: '$(BuildConfiguration)'

# Run Integration Tests
- template: template-run-integration-tests.yaml
  parameters:
    BuildConfiguration: '$(BuildConfiguration)'

# IMDS (VM / VMSS)
- template: template-run-mi-e2e-imds.yaml
  parameters:
    BuildConfiguration: '$(BuildConfiguration)'

# Azure Arc (custom self-hosted agent)
- template: template-run-mi-e2e-azurearc.yaml
  parameters:
    BuildConfiguration: '$(BuildConfiguration)'
